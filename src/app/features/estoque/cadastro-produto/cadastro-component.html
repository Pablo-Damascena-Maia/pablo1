<div class="inventory-container">
  <div class="inventory-card">
    <h2 class="card-title">Cadastro de Produto</h2>

    <div *ngIf="showSuccessMessage" class="success-message">
      <p>Produto cadastrado com sucesso!</p>
    </div>

    <form [formGroup]="productForm" (ngSubmit)="onSubmit()" class="product-form">
      <div class="form-grid">
        <!-- Product Name -->
        <div class="form-group">
          <label for="name">Nome do Produto *</label>
          <input
            type="text"
            id="name"
            formControlName="name"
            [class.invalid]="isFieldInvalid('name')"
            placeholder="Digite o nome do produto">
          <div *ngIf="hasError('name', 'required')" class="error-message">
            Nome é obrigatório
          </div>
          <div *ngIf="hasError('name', 'minlength')" class="error-message">
            Nome deve ter pelo menos 3 caracteres
          </div>
        </div>

        <!-- Price -->
        <div class="form-group">
          <label for="price">Preço de Venda (R$) *</label>
          <input
            type="number"
            id="price"
            formControlName="price"
            [class.invalid]="isFieldInvalid('price')"
            min="0.01"
            step="0.01">
          <div *ngIf="hasError('price', 'required')" class="error-message">
            Preço é obrigatório
          </div>
          <div *ngIf="hasError('price', 'min')" class="error-message">
            Preço deve ser maior que zero
          </div>
        </div>

        <!-- Cost -->
        <div class="form-group">
          <label for="cost">Custo (R$) *</label>
          <input
            type="number"
            id="cost"
            formControlName="cost"
            [class.invalid]="isFieldInvalid('cost')"
            min="0"
            step="0.01">
          <div *ngIf="hasError('cost', 'required')" class="error-message">
            Custo é obrigatório
          </div>
          <div *ngIf="hasError('cost', 'min')" class="error-message">
            Custo não pode ser negativo
          </div>
        </div>

        <!-- Quantity -->
        <div class="form-group">
          <label for="quantity">Quantidade em Estoque *</label>
          <input
            type="number"
            id="quantity"
            formControlName="quantity"
            [class.invalid]="isFieldInvalid('quantity')"
            min="0">
          <div *ngIf="hasError('quantity', 'required')" class="error-message">
            Quantidade é obrigatória
          </div>
          <div *ngIf="hasError('quantity', 'min')" class="error-message">
            Quantidade não pode ser negativa
          </div>
        </div>

        <!-- Minimum Stock -->
        <div class="form-group">
          <label for="minimumStock">Estoque Mínimo *</label>
          <input
            type="number"
            id="minimumStock"
            formControlName="minimumStock"
            [class.invalid]="isFieldInvalid('minimumStock')"
            min="0">
          <div *ngIf="hasError('minimumStock', 'required')" class="error-message">
            Estoque mínimo é obrigatório
          </div>
        </div>

        <!-- Supplier -->
        <div class="form-group">
          <label for="supplier">Fornecedor</label>
          <input
            type="text"
            id="supplier"
            formControlName="supplier"
            placeholder="Nome do fornecedor">
        </div>

        <!-- Location -->
        <div class="form-group">
          <label for="location">Localização no Estoque</label>
          <input
            type="text"
            id="location"
            formControlName="location"
            placeholder="Ex: Prateleira A3">
        </div>
      </div>

      <!-- Description -->
      <div class="form-group full-width">
        <label for="description">Descrição</label>
        <textarea
          id="description"
          formControlName="description"
          [class.invalid]="isFieldInvalid('description')"
          placeholder="Descrição detalhada do produto"
          rows="3"></textarea>
        <div *ngIf="hasError('description', 'maxlength')" class="error-message">
          Descrição não pode exceder 500 caracteres
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn-secondary" (click)="onReset()">
          Limpar
        </button>
        <button
          type="submit"
          class="btn-primary"
          [disabled]="isSubmitting">
          {{ isSubmitting ? 'Salvando...' : 'Cadastrar Produto' }}
        </button>
      </div>
    </form>
  </div>
</div>
