<div class="inventory-container">
  <div class="inventory-card">
    <h2 class="card-title">Cadastro de Produto em Estoque</h2>

    <div *ngIf="showSuccessMessage" class="success-message">
      <p>Produto cadastrado com sucesso!</p>
    </div>

    <form [formGroup]="productForm" (ngSubmit)="onSubmit()" class="product-form">
      <div class="form-grid">
        <!-- Product ID -->
        <div class="form-group">
          <label for="produto_id">ID do Produto *</label>
          <input
            type="text"
            id="produto_id"
            formControlName="produto_id"
            [class.invalid]="isFieldInvalid('produto_id')"
            placeholder="ID do produto">
          <div *ngIf="hasError('produto_id', 'required')" class="error-message">
            ID do Produto é obrigatório
          </div>
        </div>

        <!-- Quantity -->
        <div class="form-group">
          <label for="estoque_quantidade">Quantidade em Estoque *</label>
          <input
            type="number"
            id="estoque_quantidade"
            formControlName="estoque_quantidade"
            [class.invalid]="isFieldInvalid('estoque_quantidade')"
            min="0">
          <div *ngIf="hasError('estoque_quantidade', 'required')" class="error-message">
            Quantidade é obrigatória
          </div>
          <div *ngIf="hasError('estoque_quantidade', 'min')" class="error-message">
            Quantidade não pode ser negativa
          </div>
        </div>

        <!-- Minimum Stock -->
        <div class="form-group">
          <label for="estoque_minimo">Estoque Mínimo *</label>
          <input
            type="number"
            id="estoque_minimo"
            formControlName="estoque_minimo"
            [class.invalid]="isFieldInvalid('estoque_minimo')"
            min="0">
          <div *ngIf="hasError('estoque_minimo', 'required')" class="error-message">
            Estoque mínimo é obrigatório
          </div>
        </div>

        <!-- Expiration Date -->
        <div class="form-group">
          <label for="estoque_data_validade">Data de Validade</label>
          <input
            type="date"
            id="estoque_data_validade"
            formControlName="estoque_data_validade">
        </div>

        <!-- Type -->
        <div class="form-group">
          <label for="estoque_tipo">Tipo *</label>
          <input
            type="number"
            id="estoque_tipo"
            formControlName="estoque_tipo"
            [class.invalid]="isFieldInvalid('estoque_tipo')">
          <div *ngIf="hasError('estoque_tipo', 'required')" class="error-message">
            Tipo é obrigatório
          </div>
        </div>

        <!-- Status -->
        <div class="form-group">
          <label for="estoque_status">Status *</label>
          <select
            id="estoque_status"
            formControlName="estoque_status"
            [class.invalid]="isFieldInvalid('estoque_status')">
            <option value="ativo">Ativo</option>
            <option value="inativo">Inativo</option>
            <option value="em_manutencao">Em Manutenção</option>
          </select>
          <div *ngIf="hasError('estoque_status', 'required')" class="error-message">
            Status é obrigatório
          </div>
        </div>

        <!-- Purchase Price -->
        <div class="form-group">
          <label for="estoque_valor_compra">Valor de Compra (R$) *</label>
          <input
            type="number"
            id="estoque_valor_compra"
            formControlName="estoque_valor_compra"
            [class.invalid]="isFieldInvalid('estoque_valor_compra')"
            min="0"
            step="0.01">
          <div *ngIf="hasError('estoque_valor_compra', 'required')" class="error-message">
            Valor de compra é obrigatório
          </div>
        </div>

        <!-- Sale Price -->
        <div class="form-group">
          <label for="estoque_valor_venda">Valor de Venda (R$) *</label>
          <input
            type="number"
            id="estoque_valor_venda"
            formControlName="estoque_valor_venda"
            [class.invalid]="isFieldInvalid('estoque_valor_venda')"
            min="0"
            step="0.01">
          <div *ngIf="hasError('estoque_valor_venda', 'required')" class="error-message">
            Valor de venda é obrigatório
          </div>
        </div>

        <!-- Supplier ID -->
        <div class="form-group">
          <label for="fornecedor_id">ID do Fornecedor</label>
          <input
            type="text"
            id="fornecedor_id"
            formControlName="fornecedor_id"
            placeholder="ID do fornecedor">
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn-secondary" (click)="onReset()">
          Limpar
        </button>
        <button
          type="submit"
          class="btn-primary"
          [disabled]="isSubmitting">
          {{ isSubmitting ? 'Salvando...' : 'Cadastrar Produto' }}
        </button>
      </div>
    </form>
  </div>
</div>